@page "/categories"
@using smart.charger.webui.Models.DTOs.Sessions
@using smart.charger.webui.Models.DTOs.Stations
@using smart.charger.webui.Models.DTOs.Vehicles
@inherits CategoriesViewModel

@if (!AuthState.Value.IsLoggedOn)
{
    NavigateToSignin();
}

@if (AuthState.Value.IsLoggedOn)
{
    <div class="videos">
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <h3 class="card-header">Categories</h3>
                    <div class="card-body">
                        <div class="row">
                            <div class="form-group"> 
                                <TelerikButton Enabled="@SaveBtnEnabled" Primary="true" Icon="add" 
                                               OnClick="@OnAddCategoryClickHandler">Add</TelerikButton> 
                                <TelerikButton Icon="edit" OnClick="@OnEditCategoryClickHandler">Edit</TelerikButton> 
                                <TelerikButton Icon="delete" Class="dangerButton" OnClick="@OnDeleteCategoryClickHandler">Delete</TelerikButton> 
                            </div> 
                        </div>
                        <div class="row">
                            <TelerikGrid Data="@SessionState.Value.SessionList" Pageable="true" PageSize="10" Height="900px"
                                PageChanged="@PageChangedHandler" Sortable="true" SelectionMode="GridSelectionMode.Single"
                                SelectedItemsChanged="@((IEnumerable<SessionDto> sessionList) => OnSelect(sessionList))"
                                SelectedItems="@SelectedItems" Reorderable="true" Resizable="true" Groupable="false"
                                FilterMode="GridFilterMode.FilterRow">
                                <GridColumns>
                                    <GridColumn Field="@(nameof(SessionDto.Id))" Title="Id" Visible="false"
                                        Groupable="false" />
                                    <GridColumn Field="@(nameof(SessionDto.Started))" Title="Date - Time Started"
                                        Groupable="false" />
                                    <GridColumn Field="@(nameof(SessionDto.Ended))" Title="Date - Time Ended"
                                        Groupable="false" />
                                    <GridColumn Field="@(nameof(SessionDto.VehicleComputedInfo))" Title="Vehicle"
                                        Groupable="false" />
                                    <GridColumn Field="@(nameof(SessionDto.ChargerSerial))" Title="Charger"
                                        Groupable="false" />
                                    <GridColumn Field="@(nameof(SessionDto.Status))" Title="Status" Groupable="false" />
                                    <GridColumn Field="@(nameof(SessionDto.VehicleOwnerComputedInfo))" Title="Owner"
                                        Groupable="false" />
                                </GridColumns>
                            </TelerikGrid>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
